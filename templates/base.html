{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}HireFlow{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/pages/sidebar.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<!-- âœ… ONLY CHANGE IS HERE -->
<body class="
    {% if user.is_authenticated %}
        {% if user.role == 'ADMIN' or user.role == 'SUPERUSER' %}
            role-admin
        {% elif user.role == 'HR' %}
            role-hr
        {% endif %}
    {% endif %}
">   

{% if messages %}   
<div class="alert-container">
    {% for msg in messages %}
        <div class="alert
            {% if 'success' in msg.tags %}alert-success
            {% elif 'error' in msg.tags %}alert-error
            {% elif 'warning' in msg.tags %}alert-warning
            {% else %}alert-info
            {% endif %}">
            <span>{{ msg }}</span>
            <button class="alert-close">&times;</button>
        </div>
    {% endfor %}   
</div>
{% endif %}

{% if user.is_authenticated and not hide_sidebar %}
    {% include "content/sidebar.html" %}
{% endif %}

<div class="page-content {% if hide_sidebar %}no-sidebar{% endif %}">
    {% block content %}{% endblock %}
</div>

<script>
document.querySelectorAll(".alert-close").forEach(btn => {
    btn.addEventListener("click", () => {
        const box = btn.closest(".alert");
        box.remove();
    });
});
</script>

</body>
</html>

